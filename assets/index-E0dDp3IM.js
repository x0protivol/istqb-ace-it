import{j as e}from"./ui-kpysx1iD.js";import{a as t,r as i}from"./vendor-DnzreVxQ.js";import{_ as r}from"./supabase-Be-YUSGi.js";var n;!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const i of e)if("childList"===i.type)for(const e of i.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var s=t;function o(){const[t,n]=i.useState(""),[s,o]=i.useState(!1),[l,a]=i.useState(""),[c,d]=i.useState([]),[u,p]=i.useState(!1),[m,h]=i.useState(0),[f,g]=i.useState([]),[y,x]=i.useState(!1),j=f.reduce((e,t,i)=>e+(t===c[i]?.correct?1:0),0);return e.jsxs("div",{style:{minHeight:"100vh",padding:16,fontFamily:"system-ui, sans-serif"},children:[e.jsx("h1",{style:{fontSize:24,marginBottom:8},children:"ISTQB PDF → Quiz"}),e.jsx("p",{style:{color:"#666",marginBottom:16},children:"Upload your ISTQB PDF; we will extract text and generate a quick practice quiz."}),e.jsx("div",{style:{marginBottom:16},children:e.jsx("input",{type:"file",accept:"application/pdf",onChange:async e=>{const t=e.target.files?.[0];if(t)if("application/pdf"===t.type){a(""),p(!1),x(!1),d([]),g([]),h(0),n(t.name),o(!0);try{const e=await async function(e){const t=await e.arrayBuffer(),i=(await r(()=>import("./pdf-9EWWyUIy.js"),[])).getDocument({data:t}),n=await i.promise;let s="";for(let r=1;r<=n.numPages;r++){const e=await n.getPage(r);s+="\n"+(await e.getTextContent()).items.map(e=>"string"==typeof e.str?e.str:"").join(" ")}return s.replace(/[\u0000-\u001F\u007F]/g," ").replace(/\s+/g," ").trim()}(t),i=function(e,t=20){return e.split(/(?<=[.!?])\s+/).map(e=>e.trim()).filter(e=>e.length>40&&e.length<220).slice(0,t).map((e,t)=>{const i=e.slice(0,90);return{question:`Which option best reflects the statement: ${e}`,options:[`Directly supports: ${i}`,`Contradicts: ${i}`,`Irrelevant to: ${i}`,`Partially supports: ${i}`],correct:0}})}(e,20);d(i),g(Array(i.length).fill(-1))}catch(i){a("Failed to process PDF. Try another file.")}finally{o(!1)}}else a("Please upload a PDF")}})}),s&&e.jsx("div",{children:"Processing PDF… This may take a moment."}),l&&e.jsx("div",{style:{color:"red"},children:l}),!s&&c.length>0&&!u&&!y&&e.jsxs("div",{style:{marginTop:12},children:[e.jsxs("div",{children:["Ready with ",c.length," questions from: ",e.jsx("strong",{children:t})]}),e.jsx("button",{onClick:()=>{0!==c.length&&(p(!0),x(!1),h(0))},style:{marginTop:8,padding:"8px 12px"},children:"Start Quiz"})]}),u&&c.length>0&&e.jsxs("div",{style:{marginTop:16,maxWidth:900},children:[e.jsxs("div",{style:{marginBottom:8},children:["Question ",m+1," / ",c.length]}),e.jsx("div",{style:{fontWeight:600,marginBottom:12},children:c[m].question}),e.jsx("div",{style:{display:"grid",gap:8},children:c[m].options.map((t,i)=>e.jsxs("button",{onClick:()=>(e=>{const t=f.slice();t[m]=e,g(t)})(i),style:{textAlign:"left",padding:"10px 12px",border:f[m]===i?"2px solid #2563eb":"1px solid #ddd",borderRadius:6,background:f[m]===i?"#eff6ff":"#fff"},children:[String.fromCharCode(65+i),". ",t]},i))}),e.jsxs("div",{style:{display:"flex",gap:8,marginTop:12},children:[e.jsx("button",{onClick:()=>{m>0&&h(m-1)},disabled:0===m,children:"Previous"}),m<c.length-1?e.jsx("button",{onClick:()=>{m<c.length-1&&h(m+1)},disabled:-1===f[m],children:"Next"}):e.jsx("button",{onClick:()=>{x(!0),p(!1)},disabled:f.some(e=>-1===e),children:"Finish"})]})]}),y&&e.jsxs("div",{style:{marginTop:16},children:[e.jsx("h2",{children:"Results"}),e.jsxs("div",{style:{marginBottom:8},children:["Score: ",j," / ",c.length]}),e.jsx("button",{onClick:()=>{x(!1),p(!0),h(0)},children:"Review"})]})]})}n=s.createRoot,s.hydrateRoot;const l=document.getElementById("root");if(!l)throw new Error("Root container missing");n(l).render(e.jsx(o,{}));
